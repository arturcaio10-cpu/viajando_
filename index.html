<!DOCTYPE html>
<html>
<head>
    <title>Viajando Pelo Mundo</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            background-image: url("fundo.jpg");
            background-repeat: no-repeat;
            background-size: cover;
            background-position: center center;
            background-attachment: fixed; 
            
            display: flex;
            margin: 0; 
            font-family: Arial, sans-serif;
            color: white;
            min-height: 100vh;
        }
        .menu-container {
            width: 15%; 
            background-color: rgba(0, 0, 0, 0.7); 
            color: white;
            padding: 20px;
            box-sizing: border-box; 
            text-align: center;
        }
        .menu-container img {
            width: 100%;
            height: auto;
            max-width: 150px; 
        }
        .menu-container h3 {
            margin-top: 20px;
            font-family: "Playfair Display", serif;
            font-weight: 500;
        }
        .menu-container ul {
            list-style-type: none; 
            padding: 0;
        }
        .menu-container li a {
            display: block;
            padding: 10px;
            text-decoration: none;
            color: white;
            border-bottom: 1px solid #555;
            transition: background-color 0.3s; 
            font-family: "Roboto", sans-serif;
        }
        .menu-container li a:hover {
            background-color: #555;
        }
        .main-content {
            width: 85%; 
            background-color: rgba(0, 0, 0, 0.5); 
            box-sizing: border-box;
            padding: 20px;
        }
        .video-container {
            position: relative;
            padding-bottom: 56.25%; 
            height: 0;
            overflow: hidden;
            max-width: 90%; 
            margin: 20px auto; 
        }
        .video-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .responsive-img {
            max-width: 95%;
            height: auto;
            display: block;
            margin: 20px auto;
        }
        #main-content form {
            max-width: 400px;
            margin: 30px auto;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            text-align: center;
        }
        #main-content input[type="text"], #main-content input[type="date"] {
            width: 100%;
            padding: 8px;
            box-sizing: border-box; 
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        #main-content button {
            background-color: #ffffff;
            color: rgb(0, 0, 0);
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: 0.3s; 
        }
        #main-content button:hover {
            background-color: #0056b3;
            color: #ffffff; 
        }
        #main-content #resultados {
            margin-top: 30px;
            text-align: left; 
            max-width: 600px; 
            margin-left: auto;
            margin-right: auto;
        }
        #main-content .passagem {
            border: 1px solid #eee;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            background-color: #fff;
            color: #363636;
            box-shadow: 2px 2px 5px rgba(0, 0, 0, 0.1); 
        }
        #main-content .carregando {
            color: #ffffff;
            font-size: 18px;
            margin-top: 20px;
        }
        #main-content label {
             color: white; 
        }  @media screen and (max-width: 768px) {
            body {
                flex-direction: column;
                min-height: 100vh;
            }
            
            .menu-container {
                width: 100%;
                padding: 15px;
                background-color: rgba(0, 0, 0, 0.8);
                position: relative;
                z-index: 1000;
            }
            
            .menu-container img {
                max-width: 120px;
                height: auto;
            }
            
            .menu-container h3 {
                font-size: 18px;
                margin-top: 10px;
            }
            
            .menu-container ul {
                display: flex;
                flex-wrap: wrap;
                justify-content: center;
                gap: 5px;
                margin-top: 15px;
            }
            
            .menu-container li {
                flex: 1;
                min-width: 120px;
            }
            
            .menu-container li a {
                padding: 8px 12px;
                font-size: 14px;
                text-align: center;
                border-radius: 5px;
                border-bottom: none;
                background-color: rgba(255, 255, 255, 0.1);
            }
            
            .menu-container li a:hover {
                background-color: rgba(255, 255, 255, 0.2);
            }
            
            .main-content {
                width: 100%;
                padding: 15px;
                min-height: calc(100vh - 200px);
            }
            
            .video-container {
                max-width: 100%;
                margin: 15px 0;
            }
            
            .responsive-img {
                max-width: 100%;
                margin: 15px 0;
            }
            
            #main-content form {
                max-width: 100%;
                margin: 20px 0;
                padding: 15px;
            }
            
            #main-content input[type="text"], 
            #main-content input[type="date"] {
                width: 100%;
                padding: 12px;
                font-size: 16px;
                margin-bottom: 10px;
            }
            
            #main-content button {
                width: 100%;
                padding: 15px;
                font-size: 18px;
                margin-top: 10px;
            }
            
            #main-content #resultados {
                max-width: 100%;
                margin: 20px 0;
            }
            
            #main-content .passagem {
                padding: 12px;
                margin-bottom: 12px;
                font-size: 14px;
            }
            
            #main-content .carregando {
                font-size: 16px;
                text-align: center;
            }
        }
        
        @media screen and (max-width: 480px) {
            .menu-container {
                padding: 10px;
            }
            
            .menu-container img {
                max-width: 100px;
            }
            
            .menu-container h3 {
                font-size: 16px;
            }
            
            .menu-container ul {
                flex-direction: column;
                gap: 8px;
            }
            
            .menu-container li {
                min-width: auto;
            }
            
            .menu-container li a {
                padding: 10px;
                font-size: 13px;
            }
            
            .main-content {
                padding: 10px;
            }
            
            #main-content form {
                padding: 10px;
            }
            
            #main-content input[type="text"], 
            #main-content input[type="date"] {
                padding: 10px;
                font-size: 14px;
            }
            
            #main-content button {
                padding: 12px;
                font-size: 16px;
            }
            
            #main-content .passagem {
                padding: 10px;
                font-size: 13px;
            }
        }
    </style>
</head>
<body>
    <div class="menu-container">
        <img src="logo.png" alt="Logo de Viagem">
        <h3>Viajando Pelo Mundo</h3>
        <ul>
            <li><a href="pagina_inicial.html">Início</a></li>
            <li><a href="melhores_paises.html">Melhores Paises</a></li> 
            <li><a href="compras.html">Compras de Passagens</a></li>
            <li><a href="inscricao.html">Inscreva-se</a></li>
        </ul>
        <p style="font-size: 12px; margin-top: 50px;"></p> 
    </div>
    <div class="main-content" id="main-content">
    </div>
   <script>
    const airportMap = {
        'são paulo': 'GRU',
        'campinas': 'VCP',
        'rio de janeiro': 'GIG',
        'rio de janeiro - sdu': 'SDU',
        'brasilia': 'BSB',
        'salvador': 'SSA',
        'fortaleza': 'FOR',
        'recife': 'REC',
        'porto alegre': 'POA',
        'curitiba': 'CWB',
        'belo horizonte': 'CNF',
        'belém': 'BEL',
        'manaus': 'MAO',
        'goiania': 'GYN',
        'vitoria': 'VIX',
        'florianópolis': 'FLN',
        'natal': 'NAT',
        'maceio': 'MCZ',
        'fóz do iguaçu': 'IGU',
        'cuiaba': 'CGB',
        'nova york': 'JFK',
        'los angeles': 'LAX',
        'miami': 'MIA',
        'orlando': 'MCO',
        'atlanta': 'ATL',
        'chicago': 'ORD',
        'toronto': 'YYZ',
        'montreal': 'YUL',
        'mexico': 'MEX',
        'buenos aires': 'EZE',
        'santiago': 'SCL',
        'lima': 'LIM',
        'bogota': 'BOG',
        'lisboa': 'LIS',
        'madri': 'MAD',
        'paris': 'CDG',
        'londres': 'LHR',
        'amsterdam': 'AMS',
        'frankfurt': 'FRA',
        'roma': 'FCO',
        'milão': 'MXP',
        'dublin': 'DUB',
        'moscou': 'SVO',
        'istambul': 'IST',
        'beijing': 'PEK',
        'tokyo': 'HND',
        'seul': 'ICN',
        'sydney': 'SYD',
        'dubai': 'DXB',
        'doha': 'DOH',
        'joanesburgo': 'JNB',
        'cidade do cabo': 'CPT',
        'austin': 'AUS',
    };
    function getIataCode(cidade) {
        return airportMap[cidade.toLowerCase().trim()] || cidade.toUpperCase().trim();
    }
    async function buscarPassagens(origem, destino, ida, volta) {
    const PROXY_URL = 'https://corsproxy.io/?'; 
    const URL_API = 'https://serpapi.com/search.json';
    const API_KEY_SERPAPI = '1d201974740b41f8ef52bcaf835a2dd1ec6d0572b3be145a493b76607fd0a70b'; 
    
    const iataOrigem = getIataCode(origem);
    const iataDestino = getIataCode(destino);

    const isRoundTrip = !!volta;
    
    const params = new URLSearchParams({
        engine: "google_flights",
        departure_id: iataOrigem, 
        arrival_id: iataDestino, 
        outbound_date: ida,
        type: isRoundTrip ? "1" : "2", 
        ...(isRoundTrip && { return_date: volta }), 
        currency: "BRL",
        hl: "pt",
        api_key: API_KEY_SERPAPI 
    });
    const finalApiUrl = `${URL_API}?${params.toString()}`;
    try {
        const response = await fetch(`${PROXY_URL}${finalApiUrl}`);   
        if (!response.ok) {
            const errorText = await response.text(); 
            let errorMessage = `Erro HTTP ${response.status} (${response.statusText}). Detalhes: ${errorText.substring(0, 100)}...`;
            throw new Error(errorMessage);
        }
        const data = await response.json(); 
        if (data.error) {
             throw new Error(`Erro na API: ${data.error}. IDs usadas: ${iataOrigem} -> ${iataDestino}`);
        }
        const passagensSerp = data.best_flights || data.other_flights || []; 
        const passagensLimpa = passagensSerp.filter(item => item && typeof item === 'object');
        const passagensFormatadas = passagensLimpa.map(voo => {
            const primeiroVoo = voo.flights && voo.flights[0];
            const duracaoMinutos = voo.duration || 0;
            const nomeCompanhia = voo.operating_airline_name || 
                                 voo.airline_name || 
                                 primeiroVoo?.airline?.name || 
                                 primeiroVoo?.segments?.[0]?.airline?.name || 
                                 'Companhia Desconhecida';
            return {
                PrecoAdulto: voo.price || 0,
                Itinerarios: [{
                    DuracaoTotal: duracaoMinutos ? 
                        `${Math.floor(duracaoMinutos / 60)}h ${duracaoMinutos % 60}m` : 
                        'N/A',
                    Segmentos: [{
                        CompanhiaAerea: {
                            Nome: nomeCompanhia 
                        }
                    }]
                }]
            };
        });
        return passagensFormatadas; 
    } catch (error) {
        console.error('Falha na busca REAL de passagens. Retornando dados de teste.', error);
        
        // 🚀 NOVO JSON DE MOCK (Dados de Teste)
        const mockPassagens = [
                {
  "search_metadata": {
    "id": "651a585815afff2d53eb9a5e",
    "status": "Success",
    "json_endpoint": "https://serpapi.com/searches/e65fd34e00db9b2b/651a585815afff2d53eb9a5e.json",
    "created_at": "2023-10-02 05:42:48 UTC",
    "processed_at": "2023-10-02 05:42:48 UTC",
    "google_flights_url": "https://www.google.com/travel/flights?hl=en",
    "raw_html_file": "https://serpapi.com/searches/e65fd34e00db9b2b/651a585815afff2d53eb9a5e.html",
    "prettify_html_file": "https://serpapi.com/searches/e65fd34e00db9b2b/651a585815afff2d53eb9a5e.prettify",
    "total_time_taken": 0.71
  },
  "search_parameters": {
    "engine": "google_flights",
    "hl": "en",
    "departure_id": "PEK",
    "arrival_id": "AUS",
    "outbound_date": "2023-10-03",
    "return_date": "2023-10-09",
    "currency": "USD"
  },
  "best_flights": [
    {
      "flights": [
        {
          "departure_airport": {
            "name": "Beijing Capital International Airport",
            "id": "PEK",
            "time": "2023-10-03 15:10"
          },
          "arrival_airport": {
            "name": "Haneda Airport",
            "id": "HND",
            "time": "2023-10-03 19:35"
          },
          "duration": 205,
          "airplane": "Boeing 787",
          "airline": "ANA",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/NH.png",
          "travel_class": "Economy",
          "flight_number": "NH 962",
          "legroom": "31 in",
          "extensions": [
            "Average legroom (31 in)",
            "Wi-Fi for a fee",
            "In-seat power & USB outlets",
            "On-demand video",
            "Carbon emissions estimate: 133 kg"
          ]
        },
        {
          "departure_airport": {
            "name": "Haneda Airport",
            "id": "HND",
            "time": "2023-10-03 21:05"
          },
          "arrival_airport": {
            "name": "Los Angeles International Airport",
            "id": "LAX",
            "time": "2023-10-03 15:10"
          },
          "duration": 605,
          "airplane": "Boeing 787",
          "airline": "ANA",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/NH.png",
          "travel_class": "Economy",
          "flight_number": "NH 126",
          "ticket_also_sold_by": [
            "United"
          ],
          "legroom": "32 in",
          "extensions": [
            "Above average legroom (32 in)",
            "In-seat power & USB outlets",
            "On-demand video",
            "Carbon emissions estimate: 836 kg"
          ],
          "overnight": true
        },
        {
          "departure_airport": {
            "name": "Los Angeles International Airport",
            "id": "LAX",
            "time": "2023-10-03 19:01"
          },
          "arrival_airport": {
            "name": "Austin-Bergstrom International Airport",
            "id": "AUS",
            "time": "2023-10-03 23:59"
          },
          "duration": 178,
          "airplane": "Boeing 737MAX 9 Passenger",
          "airline": "United",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/UA.png",
          "travel_class": "Economy",
          "flight_number": "UA 2175",
          "legroom": "30 in",
          "extensions": [
            "Average legroom (30 in)",
            "Wi-Fi for a fee",
            "In-seat power outlet",
            "Stream media to your device",
            "Carbon emissions estimate: 135 kg"
          ]
        }
      ],
      "layovers": [
        {
          "duration": 90,
          "name": "Haneda Airport",
          "id": "HND"
        },
        {
          "duration": 231,
          "name": "Los Angeles International Airport",
          "id": "LAX"
        }
      ],
      "total_duration": 1309,
      "carbon_emissions": {
        "this_flight": 1106000,
        "typical_for_this_route": 949000,
        "difference_percent": 17
      },
      "price": 2512,
      "type": "Round trip",
      "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/multi.png",
      "departure_token": "W1siUEVLIiwiMjAyMy0xMC0wMyIsIkhORCIsbnVsbCwiTkgiLCI5NjIiXSxbIkhORCIsIjIwMjMtMTAtMDMiLCJMQVgiLG51bGwsIk5IIiwiMTI2Il0sWyJMQVgiLCIyMDIzLTEwLTAzIiwiQVVTIixudWxsLCJVQSIsIjIxNzUiXV0="
    },
    {
      "flights": [
        {
          "departure_airport": {
            "name": "Beijing Capital International Airport",
            "id": "PEK",
            "time": "2023-10-03 10:40"
          },
          "arrival_airport": {
            "name": "Incheon International Airport",
            "id": "ICN",
            "time": "2023-10-03 13:50"
          },
          "duration": 130,
          "airplane": "Airbus A330",
          "airline": "Asiana",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/OZ.png",
          "travel_class": "Economy",
          "flight_number": "OZ 332",
          "legroom": "32 in",
          "extensions": [
            "Above average legroom (32 in)",
            "In-seat power outlet",
            "On-demand video",
            "Carbon emissions estimate: 84 kg"
          ]
        },
        {
          "departure_airport": {
            "name": "Incheon International Airport",
            "id": "ICN",
            "time": "2023-10-03 20:55"
          },
          "arrival_airport": {
            "name": "San Francisco International Airport",
            "id": "SFO",
            "time": "2023-10-03 15:30"
          },
          "duration": 635,
          "airplane": "Airbus A350",
          "airline": "Asiana",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/OZ.png",
          "travel_class": "Economy",
          "flight_number": "OZ 212",
          "legroom": "32 in",
          "extensions": [
            "Above average legroom (32 in)",
            "Wi-Fi for a fee",
            "In-seat power & USB outlets",
            "On-demand video",
            "Carbon emissions estimate: 619 kg"
          ],
          "overnight": true,
          "often_delayed_by_over_30_min": true
        },
        {
          "departure_airport": {
            "name": "San Francisco International Airport",
            "id": "SFO",
            "time": "2023-10-04 07:40"
          },
          "arrival_airport": {
            "name": "Austin-Bergstrom International Airport",
            "id": "AUS",
            "time": "2023-10-04 13:10"
          },
          "duration": 210,
          "airplane": "Boeing 737",
          "airline": "Alaska",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/AS.png",
          "travel_class": "Economy",
          "flight_number": "AS 512",
          "legroom": "31 in",
          "extensions": [
            "Average legroom (31 in)",
            "Wi-Fi for a fee",
            "In-seat power & USB outlets",
            "Stream media to your device",
            "Carbon emissions estimate: 175 kg"
          ]
        }
      ],
      "layovers": [
        {
          "duration": 425,
          "name": "Incheon International Airport",
          "id": "ICN"
        },
        {
          "duration": 970,
          "name": "San Francisco International Airport",
          "id": "SFO",
          "overnight": true
        }
      ],
      "total_duration": 2370,
      "carbon_emissions": {
        "this_flight": 880000,
        "typical_for_this_route": 949000,
        "difference_percent": -7
      },
      "price": 2513,
      "type": "Round trip",
      "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/multi.png",
      "departure_token": "W1siUEVLIiwiMjAyMy0xMC0wMyIsIklDTiIsbnVsbCwiT1oiLCIzMzIiXSxbIklDTiIsIjIwMjMtMTAtMDMiLCJTRk8iLG51bGwsIk9aIiwiMjEyIl0sWyJTRk8iLCIyMDIzLTEwLTA0IiwiQVVTIixudWxsLCJBUyIsIjUxMiJdXQ=="
    },

  ],
  "other_flights": [
    {
      "flights": [
        {
          "departure_airport": {
            "name": "Beijing Capital International Airport",
            "id": "PEK",
            "time": "2023-10-03 18:30"
          },
          "arrival_airport": {
            "name": "Incheon International Airport",
            "id": "ICN",
            "time": "2023-10-03 21:40"
          },
          "duration": 130,
          "airplane": "Boeing 737MAX 8 Passenger",
          "airline": "Korean Air",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/KE.png",
          "travel_class": "Economy",
          "flight_number": "KE 860",
          "legroom": "31 in",
          "extensions": [
            "Average legroom (31 in)",
            "Wi-Fi for a fee",
            "In-seat power & USB outlets",
            "Stream media to your device",
            "Carbon emissions estimate: 81 kg"
          ]
        },
        {
          "departure_airport": {
            "name": "Incheon International Airport",
            "id": "ICN",
            "time": "2023-10-04 09:20"
          },
          "arrival_airport": {
            "name": "Dallas/Fort Worth International Airport",
            "id": "DFW",
            "time": "2023-10-04 08:00"
          },
          "duration": 760,
          "airplane": "Boeing 787",
          "airline": "Korean Air",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/KE.png",
          "travel_class": "Economy",
          "flight_number": "KE 31",
          "legroom": "33 in",
          "extensions": [
            "Above average legroom (33 in)",
            "In-seat power & USB outlets",
            "On-demand video",
            "Carbon emissions estimate: 807 kg"
          ],
          "overnight": true
        },
        {
          "departure_airport": {
            "name": "Dallas/Fort Worth International Airport",
            "id": "DFW",
            "time": "2023-10-04 09:35"
          },
          "arrival_airport": {
            "name": "Austin-Bergstrom International Airport",
            "id": "AUS",
            "time": "2023-10-04 10:40"
          },
          "duration": 65,
          "airplane": "Embraer 175",
          "airline": "American",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/AA.png",
          "travel_class": "Economy",
          "flight_number": "AA 3489",
          "legroom": "30 in",
          "extensions": [
            "Average legroom (30 in)",
            "Wi-Fi for a fee",
            "In-seat power & USB outlets",
            "Stream media to your device",
            "Carbon emissions estimate: 60 kg"
          ]
        }
      ],
      "layovers": [
        {
          "duration": 700,
          "name": "Incheon International Airport",
          "id": "ICN",
          "overnight": true
        },
        {
          "duration": 95,
          "name": "Dallas/Fort Worth International Airport",
          "id": "DFW"
        }
      ],
      "total_duration": 1750,
      "carbon_emissions": {
        "this_flight": 949000,
        "typical_for_this_route": 949000,
        "difference_percent": 0
      },
      "price": 3521,
      "type": "Round trip",
      "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/multi.png",
      "departure_token": "W1siUEVLIiwiMjAyMy0xMC0wMyIsIklDTiIsbnVsbCwiS0UiLCI4NjAiXSxbIklDTiIsIjIwMjMtMTAtMDQiLCJERlciLG51bGwsIktFIiwiMzEiXSxbIkRGVyIsIjIwMjMtMTAtMDQiLCJBVVMiLG51bGwsIkFBIiwiMzQ4OSJdXQ=="
    },
    {
      "flights": [
        {
          "departure_airport": {
            "name": "Beijing Capital International Airport",
            "id": "PEK",
            "time": "2023-10-03 18:30"
          },
          "arrival_airport": {
            "name": "Incheon International Airport",
            "id": "ICN",
            "time": "2023-10-03 21:40"
          },
          "duration": 130,
          "airplane": "Boeing 737MAX 8 Passenger",
          "airline": "Korean Air",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/KE.png",
          "travel_class": "Economy",
          "flight_number": "KE 860",
          "legroom": "31 in",
          "extensions": [
            "Average legroom (31 in)",
            "Wi-Fi for a fee",
            "In-seat power & USB outlets",
            "Stream media to your device",
            "Carbon emissions estimate: 81 kg"
          ]
        },
        {
          "departure_airport": {
            "name": "Incheon International Airport",
            "id": "ICN",
            "time": "2023-10-04 09:20"
          },
          "arrival_airport": {
            "name": "Hartsfield-Jackson Atlanta International Airport",
            "id": "ATL",
            "time": "2023-10-04 09:50"
          },
          "duration": 810,
          "airplane": "Boeing 747",
          "airline": "Korean Air",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/KE.png",
          "travel_class": "Economy",
          "flight_number": "KE 35",
          "legroom": "33 in",
          "extensions": [
            "Above average legroom (33 in)",
            "In-seat power & USB outlets",
            "On-demand video",
            "Carbon emissions estimate: 954 kg"
          ],
          "overnight": true
        },
        {
          "departure_airport": {
            "name": "Hartsfield-Jackson Atlanta International Airport",
            "id": "ATL",
            "time": "2023-10-04 12:59"
          },
          "arrival_airport": {
            "name": "Austin-Bergstrom International Airport",
            "id": "AUS",
            "time": "2023-10-04 14:18"
          },
          "duration": 139,
          "airplane": "Airbus A321",
          "airline": "Delta",
          "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/DL.png",
          "travel_class": "Economy",
          "flight_number": "DL 1384",
          "ticket_also_sold_by": [
            "Korean Air"
          ],
          "legroom": "31 in",
          "extensions": [
            "Average legroom (31 in)",
            "Free Wi-Fi",
            "In-seat power & USB outlets",
            "Live TV",
            "Carbon emissions estimate: 109 kg"
          ]
        }
      ],
      "layovers": [
        {
          "duration": 700,
          "name": "Incheon International Airport",
          "id": "ICN",
          "overnight": true
        },
        {
          "duration": 189,
          "name": "Hartsfield-Jackson Atlanta International Airport",
          "id": "ATL"
        }
      ],
      "total_duration": 1968,
      "carbon_emissions": {
        "this_flight": 1146000,
        "typical_for_this_route": 949000,
        "difference_percent": 21
      },
      "price": 3521,
      "type": "Round trip",
      "airline_logo": "https://www.gstatic.com/flights/airline_logos/70px/multi.png",
      "departure_token": "W1siUEVLIiwiMjAyMy0xMC0wMyIsIklDTiIsbnVsbCwiS0UiLCI4NjAiXSxbIklDTiIsIjIwMjMtMTAtMDQiLCJBVEwiLG51bGwsIktFIiwiMzUiXSxbIkFUTCIsIjIwMjMtMTAtMDQiLCJBVVMiLG51bGwsIkRMIiwiMTM4NCJdXQ=="
    },
    
  ],
  "price_insights": {
    "lowest_price": 2512,
    "price_level": "high",
    "typical_price_range": [
      1500,
      1900
    ],
    "price_history": [
      [
        1691424000,
        1877
      ],
      [
        1691510400,
        1915
      ],
      
      [
        1696089600,
        2309
      ],
      [
        1696176000,
        2512
      ]
    ]
  },
  "airports": [
    {
      "departure": [
        {
          "airport": {
            "name": "Beijing Capital International Airport",
            "id": "PEK"
          },
          "city": "Beijing",
          "country": "China",
          "country_code": "CN",
          "image": "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcQ9v_tNYxaummsU2qbFn8zuYzkcG0x6qCvqB2gbBnx-2FVlZZPsnkvUXGk07vxotk-0vRQMUYCjj2d4Wg",
          "thumbnail": "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcSzsj_yw6o3vb8i54_D21VgI5rTohxexQkZ0TrZKDKJwTSKw2yqnRYLoIcBWIY50BlHo-OPMm68zbUO-qnFvmQmm6jvtWPwo7WOzjNGX_A"
        }
      ],
      "arrival": [
        {
          "airport": {
            "name": "Austin-Bergstrom International Airport",
            "id": "AUS"
          },
          "city": "Austin",
          "country": "United States",
          "country_code": "US",
          "image": "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcRKdjkMcBZuGRD1MjnuLQvdGtpTk0RyjdYs0Z8JsPtfIjer-6VvmfmMLxzvBkeyUrhf_focikfda4rVHg",
          "thumbnail": "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSQ73FSj9E8pKaNvjWKyEDQGfLV-pky_onARvOY-zHWvQ-hOuPJSqyyXzvyg4-kGGAcZxdO6T5SYGWBzrX8x6MSPq7gBHsSLzX9MYjFJWA"
        }
      ]
    },
    {
      "departure": [
        {
          "airport": {
            "name": "John F. Kennedy International Airport",
            "id": "JFK"
          },
          "city": "New York",
          "country": "United States",
          "country_code": "US",
          "image": "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcQXj9frEFT6DZoIoTn-QoPoV3oZxBBgHclLt7dHsHG6B1AGu8zJzYmj_4rFxyc",
          "thumbnail": "https://encrypted-tbn3.gstatic.com/images?q=tbn:ANd9GcSO9yu_buXnYWg4cXn3J8RU6YZyOG59BovV4PfIt8x5_lc5F8-9l9Yxv9oIH8"
        }
      ],
      "arrival": [
        {
          "airport": {
            "name": "London Heathrow Airport",
            "id": "LHR"
          },
          "city": "London",
          "country": "United Kingdom",
          "country_code": "GB",
          "image": "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcS1nKcZksZTFlL5sKtK3HZf2wPzU-QdOcE6XQulTyP5WBGXlb1D-8FbfyCTFbU",
          "thumbnail": "https://encrypted-tbn1.gstatic.com/images?q=tbn:ANd9GcS_kdUQHgJlIUl0c3uHq6LfVRfHRyKP9dJUpge3DEx8HmxldzLZQw1xCdLfYM"
        }
      ]
    }
  ],
    "attribution": {
        "source": "Google Flights",
        "url": "https://www.google.com/travel/flights?hl=en"
    }
}
        ];
        
        await new Promise(resolve => setTimeout(resolve, 1500)); 
        return mockPassagens; 
    }
}
    function initializePassagemSearch() {
        const form = document.getElementById('form-pesquisa');

        if (form) {
            form.removeEventListener('submit', handlePassagemSearch); 
            form.addEventListener('submit', handlePassagemSearch);
        }
    }
    async function handlePassagemSearch(e) {
        e.preventDefault(); 
        const origem = document.getElementById('origem').value;
        const destino = document.getElementById('destino').value;
        const ida = document.getElementById('ida').value;
        const volta = document.getElementById('volta').value; 
        const resultadosDiv = document.getElementById('resultados');
        const botaoPesquisar = document.getElementById('btn-pesquisar');
        resultadosDiv.innerHTML = `<p class="carregando">🚀 Buscando voos de ${origem} para ${destino}... Aguarde!</p>`;
        botaoPesquisar.disabled = true;
        botaoPesquisar.textContent = 'Buscando...';
        try {
            const passagens = await buscarPassagens(origem, destino, ida, volta);
            resultadosDiv.innerHTML = `<h2>Resultados de Voo: ${origem} (${getIataCode(origem)}) para ${destino} (${getIataCode(destino)})</h2>`; 
            if (passagens.length > 0) {
                passagens.forEach(passagem => {
                    if (!passagem) {
                        return; 
                    }
                    const precoTotal = passagem.PrecoAdulto || 0;
                    const taxaTotal = 0; 
                    const primeiroItinerario = passagem.Itinerarios && passagem.Itinerarios[0];
                    const primeiroSegmento = primeiroItinerario && primeiroItinerario.Segmentos && primeiroItinerario.Segmentos[0];
                    const companhiaAerea = (primeiroSegmento && primeiroSegmento.CompanhiaAerea && primeiroSegmento.CompanhiaAerea.Nome) || 'N/A';
                    const duracaoTotal = (primeiroItinerario && primeiroItinerario.DuracaoTotal) || 'N/A';               
                    const precoFormatado = precoTotal.toLocaleString('pt-BR', { style: 'currency', currency: 'BRL' });        
                    resultadosDiv.innerHTML += `
                        <div class="passagem">
                            <strong>${companhiaAerea}</strong><br>
                            Rota: ${origem} (${getIataCode(origem)}) para ${destino} (${getIataCode(destino)})<br>
                            <span style="color: green; font-weight: bold; font-size: 1.2em;">Preço Final: ${precoFormatado}</span><br>
                            Duração Estimada: ${duracaoTotal}<br>
                            ${taxaTotal > 0 ? `<p style="font-size: 12px; margin-top: 5px; color: #777;">* Taxas de R$ ${taxaTotal.toFixed(2)} inclusas.</p>` : ''}
                        </div>
                    `;
                });
            } else {
                resultadosDiv.innerHTML += '<p>Não achamos voos para esta rota e data. Tente um voo com conexão ou outra data!</p>';
            }
        } catch (error) {
            resultadosDiv.innerHTML = `<p style="color: red;">Ocorreu um erro. Tente novamente mais tarde. (${error.message})</p>`;
            console.error('Erro na requisição:', error);
        } finally {
            botaoPesquisar.disabled = false;
            botaoPesquisar.textContent = 'Pesquisar Agora';
        }
    }
    function loadContent(url) {
        fetch(url)
            .then(response => response.text())
            .then(html => {
                document.getElementById('main-content').innerHTML = html;
                console.log("Conteúdo de " + url + " carregado com sucesso.");   
                if (url === 'compras.html') {
                    initializePassagemSearch();
                }
                const scripts = document.getElementById('main-content').querySelectorAll('script');
                scripts.forEach(oldScript => {
                    const newScript = document.createElement('script');
                    Array.from(oldScript.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value));
                    newScript.appendChild(document.createTextNode(oldScript.innerHTML));
                    oldScript.parentNode.removeChild(oldScript);
                    document.getElementById('main-content').appendChild(newScript);
                });
            })
            .catch(err => {
                console.error('Falha ao tentar carregar a página:', err);
                document.getElementById('main-content').innerHTML = '<h2 style="color: red; text-align: center;">Página não encontrada!</h2>';
            });
    }
    document.querySelectorAll('.menu-container a').forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const url = this.getAttribute('href');
            loadContent(url);
        });
    });
    loadContent('pagina_inicial.html');
</script>
</body>
</html>

